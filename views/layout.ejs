<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      <%= typeof title !== 'undefined' ? title : 'William Ma - Portfolio' %>
    </title>
    <meta
      name="description"
      content="<%= typeof description !== 'undefined' ? description : 'William Ma - Intern Software Engineer crafting modern web experiences with cutting-edge technologies' %>"
    />
    <meta
      name="keywords"
      content="<%= typeof keywords !== 'undefined' ? keywords : 'William Ma, software engineer, web developer, portfolio, Ho Chi Minh City, Vietnam' %>"
    />

    <!-- Open Graph Meta Tags -->
    <meta
      property="og:title"
      content="<%= typeof title !== 'undefined' ? title : 'William Ma - Portfolio' %>"
    />
    <meta
      property="og:description"
      content="<%= typeof description !== 'undefined' ? description : 'Intern Software Engineer passionate about creating elegant solutions' %>"
    />
    <meta property="og:image" content="/images/og-image.jpg" />
    <meta
      property="og:url"
      content="<%= process.env.SITE_URL || 'http://localhost:3000' %>"
    />
    <meta property="og:type" content="website" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="<%= typeof title !== 'undefined' ? title : 'William Ma - Portfolio' %>"
    />
    <meta
      name="twitter:description"
      content="<%= typeof description !== 'undefined' ? description : 'Intern Software Engineer passionate about creating elegant solutions' %>"
    />
    <meta name="twitter:image" content="/images/twitter-card.jpg" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/images/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon-16x16.png"
    />

    <!-- Theme Color for Mobile Browsers -->
    <meta name="theme-color" content="#3b82f6" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    <!-- Navigation -->
    <nav
      class="navbar navbar-expand-lg navbar-light bg-white fixed-top shadow-sm"
      id="mainNav"
    >
      <div class="container">
        <a class="navbar-brand fw-bold fs-4" href="/">
          <span class="text-dark">William</span
          ><span class="text-primary">.</span>
        </a>
        <button
          class="navbar-toggler border-0 shadow-none"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a
                class="nav-link fw-medium <%= typeof page !== 'undefined' && page === 'home' ? 'active text-primary' : 'text-dark' %>"
                href="/"
              >
                Home
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link fw-medium <%= typeof page !== 'undefined' && page === 'about' ? 'active text-primary' : 'text-dark' %>"
                href="/about"
              >
                About
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link fw-medium <%= typeof page !== 'undefined' && page === 'projects' ? 'active text-primary' : 'text-dark' %>"
                href="/projects"
              >
                Projects
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link fw-medium <%= typeof page !== 'undefined' && page === 'resume' ? 'active text-primary' : 'text-dark' %>"
                href="/resume"
              >
                Resume
              </a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link fw-medium <%= typeof page !== 'undefined' && page === 'contact' ? 'active text-primary' : 'text-dark' %>"
                href="/contact"
              >
                Contact
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Scroll Progress Bar -->
    <div
      class="progress position-fixed top-0 start-0 w-100"
      style="height: 3px; z-index: 1050"
    >
      <div
        class="progress-bar bg-primary"
        id="scrollProgress"
        role="progressbar"
        style="width: 0%"
      ></div>
    </div>

    <!-- Main Content -->
    <main class="flex-grow-1"><%- body %></main>

    <!-- Elegant Compact Footer -->
    <footer class="elegant-footer bg-dark text-light py-4">
      <div class="container">
        <div class="row align-items-center g-3">
          <!-- Brand & Social -->
          <div class="col-lg-4 col-md-6">
            <div
              class="d-flex align-items-center justify-content-center justify-content-md-start"
            >
              <div class="footer-brand me-4">
                <h5 class="fw-bold mb-1 text-white">
                  William<span class="text-primary">.</span>
                </h5>
                <small class="text-muted">Software Engineer</small>
              </div>
              <div class="social-links d-flex gap-2">
                <a
                  href="https://github.com/williamm"
                  class="social-icon"
                  title="GitHub"
                  target="_blank"
                >
                  <i class="fab fa-github"></i>
                </a>
                <a
                  href="https://linkedin.com/in/williamm"
                  class="social-icon"
                  title="LinkedIn"
                  target="_blank"
                >
                  <i class="fab fa-linkedin"></i>
                </a>
                <a
                  href="https://twitter.com/williamm"
                  class="social-icon"
                  title="Twitter"
                  target="_blank"
                >
                  <i class="fab fa-twitter"></i>
                </a>
                <a
                  href="mailto:mqcuong1603@gmail.com"
                  class="social-icon"
                  title="Email"
                >
                  <i class="fas fa-envelope"></i>
                </a>
              </div>
            </div>
          </div>

          <!-- Quick Links -->
          <div class="col-lg-4 col-md-6">
            <div class="quick-links d-flex justify-content-center gap-4">
              <a href="/" class="footer-link">Home</a>
              <a href="/about" class="footer-link">About</a>
              <a href="/projects" class="footer-link">Projects</a>
              <a href="/resume" class="footer-link">Resume</a>
              <a href="/contact" class="footer-link">Contact</a>
            </div>
          </div>

          <!-- Contact & Tech -->
          <div class="col-lg-4 col-12">
            <div class="text-center text-lg-end">
              <div class="contact-brief mb-2">
                <span class="contact-item me-3">
                  <i class="fas fa-envelope text-primary me-1"></i>
                  <small>mqcuong1603@gmail.com</small>
                </span>
                <span class="contact-item">
                  <i class="fas fa-map-marker-alt text-success me-1"></i>
                  <small>Ho Chi Minh City</small>
                </span>
              </div>
              <div
                class="tech-tags d-flex justify-content-center justify-content-lg-end gap-1 flex-wrap"
              >
                <span class="tech-tag">JavaScript</span>
                <span class="tech-tag">React</span>
                <span class="tech-tag">Node.js</span>
                <span class="tech-tag">AWS</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom Bar -->
        <hr class="my-3 border-secondary opacity-25" />
        <div class="row align-items-center">
          <div class="col-md-8">
            <p class="mb-0 small text-light opacity-75">
              &copy; <%= new Date().getFullYear() %> William Ma. Built with
              <i class="fas fa-heart text-danger mx-1"></i> using Node.js & AWS
            </p>
          </div>
          <div class="col-md-4 text-md-end mt-2 mt-md-0">
            <div
              class="d-flex justify-content-center justify-content-md-end gap-2"
            >
              <span class="status-badge">
                <i
                  class="fas fa-circle text-success me-1"
                  style="font-size: 0.5rem"
                ></i>
                <small>Available for Work</small>
              </span>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Back to Top Button -->
    <button
      id="backToTop"
      class="btn btn-primary rounded-circle position-fixed shadow-lg"
      style="
        width: 50px;
        height: 50px;
        bottom: 30px;
        right: 30px;
        display: none;
        z-index: 1000;
        border: none;
      "
      aria-label="Back to top"
    >
      <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="/js/main.js"></script>

    <!-- Layout JavaScript -->
    <script>
      // Scroll Progress Bar
      function updateScrollProgress() {
        const winScroll =
          document.body.scrollTop || document.documentElement.scrollTop;
        const height =
          document.documentElement.scrollHeight -
          document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        const progressBar = document.getElementById("scrollProgress");
        if (progressBar) {
          progressBar.style.width = scrolled + "%";
        }
      }

      // Back to Top Button
      function handleBackToTop() {
        const backToTopButton = document.getElementById("backToTop");
        if (window.pageYOffset > 300) {
          backToTopButton.style.display = "block";
        } else {
          backToTopButton.style.display = "none";
        }
      }

      // Navbar scroll effect
      function handleNavbarScroll() {
        const navbar = document.getElementById("mainNav");
        if (window.scrollY > 50) {
          navbar.classList.add("navbar-scrolled");
        } else {
          navbar.classList.remove("navbar-scrolled");
        }
      }

      // Event Listeners
      window.addEventListener("scroll", function () {
        updateScrollProgress();
        handleBackToTop();
        handleNavbarScroll();
      });

      document
        .getElementById("backToTop")
        .addEventListener("click", function () {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        });

      // Footer link hover effects
      document.querySelectorAll(".footer-link").forEach((link) => {
        link.addEventListener("mouseenter", function () {
          this.style.transform = "translateX(5px)";
        });
        link.addEventListener("mouseleave", function () {
          this.style.transform = "translateX(0)";
        });
      });

      // Social link hover effects
      document.querySelectorAll(".social-link").forEach((link) => {
        link.addEventListener("mouseenter", function () {
          this.style.transform = "translateY(-3px)";
        });
        link.addEventListener("mouseleave", function () {
          this.style.transform = "translateY(0)";
        });
      });
    </script>

    <style>
      /* Layout-specific styles */
      .navbar-scrolled {
        background-color: rgba(255, 255, 255, 0.95) !important;
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1) !important;
      }

      .social-link {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        color: #ffffff;
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease;
        font-size: 18px;
      }

      .social-link:hover {
        background: var(--bs-primary);
        color: #ffffff;
        transform: translateY(-3px);
      }

      .footer-link {
        color: #9ca3af;
        text-decoration: none;
        transition: all 0.3s ease;
        display: inline-block;
      }

      .footer-link:hover {
        color: var(--bs-primary);
        transform: translateX(5px);
      }

      .tech-badge {
        background: rgba(59, 130, 246, 0.1);
        color: var(--bs-primary);
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
        border: 1px solid rgba(59, 130, 246, 0.2);
        transition: all 0.3s ease;
      }

      .tech-badge:hover {
        background: var(--bs-primary);
        color: white;
        transform: translateY(-2px);
      }

      .contact-item {
        display: flex;
        align-items: flex-start;
      }

      .contact-item i {
        margin-top: 2px;
        flex-shrink: 0;
      }

      .footer-section {
        height: 100%;
      }

      /* Back to top button animation */
      #backToTop {
        transition: all 0.3s ease;
      }

      #backToTop:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4) !important;
      }

      /* Smooth scrolling */
      html {
        scroll-behavior: smooth;
      }

      /* Navigation active state */
      .navbar-nav .nav-link.active {
        position: relative;
      }

      .navbar-nav .nav-link.active::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 50%;
        transform: translateX(-50%);
        width: 6px;
        height: 6px;
        background: var(--bs-primary);
        border-radius: 50%;
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        .social-links {
          justify-content: center;
        }

        .footer-section {
          text-align: center;
          margin-bottom: 2rem;
        }

        .contact-item {
          justify-content: center;
        }
      }

      /* Elegant Footer Styles */
      .elegant-footer {
        background: linear-gradient(
          135deg,
          #1e293b 0%,
          #0f172a 100%
        ) !important;
        border-top: 1px solid rgba(59, 130, 246, 0.2);
        min-height: auto;
      }

      .footer-brand h5 {
        font-size: 1.25rem;
        font-weight: 800;
        letter-spacing: -0.02em;
      }

      .social-icon {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        background: rgba(59, 130, 246, 0.1);
        color: #93c5fd;
        border-radius: 8px;
        text-decoration: none;
        transition: all 0.3s ease;
        font-size: 14px;
        border: 1px solid rgba(59, 130, 246, 0.2);
      }

      .social-icon:hover {
        background: var(--bs-primary);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      }

      .footer-link {
        color: #94a3b8;
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
        transition: all 0.2s ease;
        position: relative;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }

      .footer-link:hover {
        color: var(--bs-primary);
        transform: translateY(-1px);
      }

      .footer-link::after {
        content: "";
        position: absolute;
        width: 0;
        height: 2px;
        bottom: -4px;
        left: 50%;
        background: var(--bs-primary);
        transition: all 0.3s ease;
        transform: translateX(-50%);
      }

      .footer-link:hover::after {
        width: 100%;
      }

      .contact-item {
        color: #94a3b8;
        font-size: 0.8rem;
        white-space: nowrap;
      }

      .contact-item i {
        font-size: 0.75rem;
      }

      .tech-tag {
        background: rgba(6, 182, 212, 0.1);
        color: #06b6d4;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        border: 1px solid rgba(6, 182, 212, 0.2);
        transition: all 0.2s ease;
      }

      .tech-tag:hover {
        background: #06b6d4;
        color: white;
        transform: scale(1.05);
      }

      .status-badge {
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
        padding: 4px 12px;
        border-radius: 20px;
        border: 1px solid rgba(16, 185, 129, 0.2);
        font-weight: 600;
      }

      .status-badge .fa-circle {
        animation: pulse-dot 2s infinite;
      }

      @keyframes pulse-dot {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      /* Responsive adjustments for elegant footer */
      @media (max-width: 768px) {
        .elegant-footer .row {
          text-align: center;
        }

        .footer-brand {
          margin-bottom: 1rem;
        }

        .quick-links {
          flex-wrap: wrap;
          gap: 1rem !important;
        }

        .contact-brief {
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .contact-item {
          display: block;
        }

        .tech-tags {
          justify-content: center !important;
          margin-top: 1rem;
        }
      }

      @media (max-width: 576px) {
        .elegant-footer .social-links {
          justify-content: center;
          margin-top: 1rem;
        }

        .quick-links {
          flex-direction: column;
          gap: 0.5rem !important;
        }
      }
    </style>
  </body>
</html>
